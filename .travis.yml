sudo: false

language: go

go:
  - 1.4.2
  - tip

env:
  # coveralls
  secure: "XLpIvRMYjxNeW2Awqnuxa4fxpQJb2wIkd7rI8Qe9SN/GR/YaQWnsiSay7bydaGvruLdxTGRlQOl36HrNFv5f1npgKdsb7JJ7PuWLJxzLbFnJdS+vP60xiw07zLWR/oEFEF6sqTESozQ6CKr5U9cmaDi0VjnajJImYBra/Hurv+85BKef2quqoUqCca+pyRrsoCFZ6CZxDRWTwIBrAwwH7wI59/4r/lTFDyTSbcm6oXktqdhXUagvHwZ2yN55XqOhAf6BNSQ/KkwYMnx3jpwQBHeUU1Tts/xxWoKLoRDHLIkv2yW1adDAoyuLqYb8+YD7x77VRU5icyl4/S84PxED/ffPVyrKrOoEvAwSxNtLP536zkJ4UDwFCV0JG12fTDwJalL7Qk8RE9+h2Sk7mGMfBb2o/7BnuU3qLUKrshTFAGj/kutNouu6EPFf8UdLq1YwNKgWbtJrqdcrZ/XWgd8FhRpdyyXjhSqctKrKrzui7NXUrx1gloR1+UOYjGhTQgE0bdPbLRBBC0PrAfHEhTcKN33swOh0AzG/sxwLbCyhr4+jmHj0KOktNsiVD62SKjqly9hJDsar+6ydBdDKtOGvIcIvGXl7ZOzbfzKLnZ/3lvBmJvWMZMfy8Hok8GS/+Ft2dH6GmEEVu9qcCtDGTKACyNiEdudPsFy/iDI7/zMEcZY="

install:
  - go get -t -v ./...
  - go get github.com/mattn/goveralls

script:
  - go test -v -covermode=count -coverprofile=profile.cov .

after_success:
  - go tool cover -func profile.cov
  - goveralls -coverprofile=profile.cov -service=travis-pro -repotoken=$COVERALLS_TOKEN
